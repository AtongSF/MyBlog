<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link href="../public/modules/bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        html {
            min-height: 100%;
            width: 100%;
            overflow-x: hidden;
        }

        body {
            background-color: #F0EEF5;
        }

        .form-horizontal .form-group {
            margin-left: 0;
            margin-right: 0;
        }

        .form-group span {
            color: red;
            font-size: small;
        }

        .article-detail {
            width: 100%;
            height: auto;
            background-color: white;
            padding: 10px;
        }

        .comment-area {
            width: 100%;
            height: auto;
            background-color: white;
            padding: 10px;
            margin-top: 10px;
        }

        .comment-item {
            position: relative;
            margin-top: 1rem;
        }

        .comment-item::after {
            content: '';
            width: 100%;
            height: 0.01rem;
            background-color: darkgray;
            position: absolute;
            bottom: 0;
        }

        .tool-bar {
            position: fixed;
            left: 0;
            top: 20%;
            height: 35%;
            width: 7%;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            /*margin: 0 auto;*/
            padding-left: 0.6rem;
            background-color: yellow;
        }

        .article-box {
            width: 80%;
            margin: 0 auto;
        }

        .tool-bar div {
            display: flex;
            flex-direction: row;
            align-items: center;
            background-color: whitesmoke;

        }

        .tool-icon {
            display: none;
        }

        @media (max-width: 1024px) {
            .tool-bar {
                height: 20%;
            }
        }

        @media (max-width: 414px) {
            .tool-bar {
                display: none;
                padding-left: 0.5rem;
                height: 20%;
                width: 15%;
                position: fixed;
                left: 85%;
                top: 25px;
                background: none;
                /*background-color: #F1F3F4;*/
                transition: all ease 0.5s 2s;
            }
            .tool-bar div{
                background: none;
            }

            .article-box {
                width: 100%;
                margin: 0 auto;
            }

            .form_1 .col-xs-7 {
                /*display: none;*/
                width: 100%;
            }

            .form_1 .col-xs-4 {
                /*display: none;*/
                width: 100%;
            }

            .form_1 .col-xs-1 {
                /*display: none;*/
                width: 20%;
            }

            .form_1 .form-group {
                margin-bottom: 10px;
            }
            .form_1 button{
                margin-left: 15px;
            }
            .tool-icon {
                display: block;
                position: fixed;
                top: 0;
                right:2.2rem;
            }

        }
    </style>
</head>
<body>
<!--<p><%=thisArticle[0].time%></p>-->
<svg t="1570114660210" class="tool-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
     p-id="5844" width="29" height="29">
    <path d="M933.339962 233.883974L541.924521 8.127591a60.21776 60.21776 0 0 0-60.21776 0L90.29132 233.883974a60.21776 60.21776 0 0 0-30.10888 52.208798v451.633201a60.21776 60.21776 0 0 0 30.10888 52.208798L481.706761 1015.691153a60.21776 60.21776 0 0 0 60.21776 0l391.415441-225.756382a60.21776 60.21776 0 0 0 30.10888-52.208798v-451.633201a60.21776 60.21776 0 0 0-30.10888-52.208798z m-421.524321-103.935854l270.19709 155.903781-270.437961 156.566176-272.003622-155.301603zM180.617961 392.256683L451.236575 546.835673v312.168869L180.617961 702.799672z m391.41544 466.687641V546.534584l270.618614-156.566176v312.831264z"
          fill="#8F9BB3" p-id="5845"></path>
</svg>
<div class="article-box">
    <div class="article-detail">
        <h3><%=thisArticle[0].title%></h3>
        <span><%=thisArticle[0].time%></span>
        <p><%-thisArticle[0].content%></p>
    </div>
    <div class="comment-area">
        <form class="form-horizontal form_1" role="form" style="overflow: hidden;">
            <div class="form-group col-xs-7">
                <div>
                    <input type="text" class="form-control" id="content" placeholder="想添加个评论?" name="content"
                           onblur="firstPoint(this)">
                    <span id="point_1" style="height: 1rem;width: 100%;display: block"></span>
                </div>
            </div>
            <div class="form-group col-xs-4">
                <div>
                    <input type="text" class="form-control" id="email" placeholder="请输入邮箱" name="email"
                           onblur="secondPoint(this)">
                    <span id="point_2" style="height:1rem;width: 100%;display: block"></span>
                </div>
            </div>
            <button type="button" class="btn btn-primary btn-sm col-xs-1" onclick="postComment(this.id)" id="commit_1">
                发表
            </button>
        </form>
        <div class="all-comment" id="all-comment">
        </div>
    </div>
</div>
<div class="tool-bar">
    <div class="view_count">
        <svg t="1570109104839" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
             p-id="3813" width="29" height="29">
            <path d="M512 416a96 96 0 1 1-96 96 96 96 0 0 1 96-96m0-64a160 160 0 1 0 160 160 160 160 0 0 0-160-160z"
                  fill="#333333" p-id="3814"></path>
            <path d="M512 298.88c188.64 0 288 113.92 366.72 213.12C800 611.36 700.64 725.12 512 725.12S224 611.36 145.28 512C224 412.64 323.36 298.88 512 298.88m0-64C264.64 234.88 147.52 406.56 64 512c83.52 105.44 200.64 277.12 448 277.12S876.48 617.44 960 512c-83.52-105.44-200.64-277.12-448-277.12z"
                  fill="#333333" p-id="3815"></path>
        </svg>
        <span>11</span>
    </div>
    <div class="comment_count">
        <svg t="1570109229766" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
             p-id="4694" width="29" height="29">
            <path d="M512 799.44c-24.12586667 0-48.2816-2.19413333-71.33546667-6.58453333l-167.84 102.048v-168.96c-87.7888-61.45386667-143.712-155.792-143.712-261.12106667 0-185.41226667 171.1232-335.72693333 382.8864-335.72693333 211.73013333 0 382.88533333 150.31466667 382.88533334 335.72693333S723.72906667 799.44 512 799.44z m0-622.0608c-185.42826667 0-335.7408 128.36693333-335.7408 287.44426667 0 97.6384 57.06133333 183.21493333 142.64 234.78186666V811.52l113.01973333-68.02133333c26.30186667 5.48053333 52.64213333 8.7616 81.18506667 8.7616 185.39946667 0 335.712-128.36693333 335.712-287.43786667C847.7056 305.74506667 697.39413333 177.3792 512 177.3792z m167.8368 263.30026667H344.12906667c-13.16693333 0-24.12693333-10.976-24.12693334-24.12693334 0-13.16693333 10.95893333-24.13866667 24.128-24.13866666h335.70666667c13.20213333 0 24.16106667 10.9728 24.16106667 24.13866666-0.00106667 13.152-10.96 24.128-24.16 24.128z m-287.42613333 95.44533333h239.17546666c13.168 0 24.12586667 10.98986667 24.12586667 24.14186667 0 13.16906667-10.9568 24.1408-24.12586667 24.1408H392.41066667c-13.1648 0-24.1248-10.97173333-24.1248-24.1408 0-13.152 10.96106667-24.14293333 24.1248-24.14293334z m0 0"
                  p-id="4695"></path>
        </svg>
        <span>11</span>
    </div>
    <!--<div><img src="" alt="点赞"><span></span></div>-->
    <div class="clap_count">
        <!--<svg width="29" height="29"><g fill-rule="evenodd"><path d="M13.74 1l.76 2.97.76-2.97zM16.82 4.78l1.84-2.56-1.43-.47zM10.38 2.22l1.84 2.56-.41-3.03zM22.38 22.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M9.1 22.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L6.1 15.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L6.4 11.26l-1.18-1.18a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L11.96 14a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L8.43 9.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L20.63 15c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM13 6.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 23 23.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z"></path></g></svg>-->
        <svg width="29" height="29">
            <path fill="red"
                  d="M13.74 1l.76 2.97.76-2.97zM16.82 4.78l1.84-2.56-1.43-.47zM10.38 2.22l1.84 2.56-.41-3.03zM22.38 22.62a5.11 5.11 0 0 1-3.16 1.61l.49-.45c2.88-2.89 3.45-5.98 1.69-9.21l-1.1-1.94-.96-2.02c-.31-.67-.23-1.18.25-1.55a.84.84 0 0 1 .66-.16c.34.05.66.28.88.6l2.85 5.02c1.18 1.97 1.38 5.12-1.6 8.1M9.1 22.1l-5.02-5.02a1 1 0 0 1 .7-1.7 1 1 0 0 1 .72.3l2.6 2.6a.44.44 0 0 0 .63-.62L6.1 15.04l-1.75-1.75a1 1 0 1 1 1.41-1.41l4.15 4.15a.44.44 0 0 0 .63 0 .44.44 0 0 0 0-.62L6.4 11.26l-1.18-1.18a1 1 0 0 1 0-1.4 1.02 1.02 0 0 1 1.41 0l1.18 1.16L11.96 14a.44.44 0 0 0 .62 0 .44.44 0 0 0 0-.63L8.43 9.22a.99.99 0 0 1-.3-.7.99.99 0 0 1 .3-.7 1 1 0 0 1 1.41 0l7 6.98a.44.44 0 0 0 .7-.5l-1.35-2.85c-.31-.68-.23-1.19.25-1.56a.85.85 0 0 1 .66-.16c.34.06.66.28.88.6L20.63 15c1.57 2.88 1.07 5.54-1.55 8.16a5.62 5.62 0 0 1-5.06 1.65 9.35 9.35 0 0 1-4.93-2.72zM13 6.98l2.56 2.56c-.5.6-.56 1.41-.15 2.28l.26.56-4.25-4.25a.98.98 0 0 1-.12-.45 1 1 0 0 1 .29-.7 1.02 1.02 0 0 1 1.41 0zm8.89 2.06c-.38-.56-.9-.92-1.49-1.01a1.74 1.74 0 0 0-1.34.33c-.38.29-.61.65-.71 1.06a2.1 2.1 0 0 0-1.1-.56 1.78 1.78 0 0 0-.99.13l-2.64-2.64a1.88 1.88 0 0 0-2.65 0 1.86 1.86 0 0 0-.48.85 1.89 1.89 0 0 0-2.67-.01 1.87 1.87 0 0 0-.5.9c-.76-.75-2-.75-2.7-.04a1.88 1.88 0 0 0 0 2.66c-.3.12-.61.29-.87.55a1.88 1.88 0 0 0 0 2.66l.62.62a1.88 1.88 0 0 0-.9 3.16l5.01 5.02c1.6 1.6 3.52 2.64 5.4 2.96a7.16 7.16 0 0 0 1.18.1c1.03 0 2-.25 2.9-.7A5.9 5.9 0 0 0 23 23.24c3.34-3.34 3.08-6.93 1.74-9.17l-2.87-5.04z"></path>
        </svg>
        <!--<svg fill="red" t="1570109491117" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4878" width="29" height="29"><path d="M966.4 609.3v18l-0.3 0.6c-5.1 19.9-21 26.7-34.1 30.5-29 8.7-59.9 18-94.3 29.3-3.8 1.3-9.6 2.9-10.2 4.2-0.6 1-0.3 6.1 0 10.6v0.3c0 2.2 0.3 4.2 0.3 6.4v1.6c1.6 43.1-0.6 87.4-6.4 135.7-2.6 21.2-4.5 25.1-24.2 30.5-28.1 7.7-56.1 15.1-84.5 22.8-47.8 12.9-95.9 25.7-143.8 38.9-26.1 7.1-52.6 14.5-78.4 21.5l-35.4 9.6-0.6 0.3h-3.2l-1-0.3c-10.2-2.9-15.6-10.9-19.8-18l-3.2-5.5c-7-12.9-14.3-26.4-22.6-38.9-50.3-76.3-118.2-145.5-207.2-211.4-27.4-20.3-56.7-38.9-85.4-56.9-10.5-6.4-21-13.2-31.6-19.9-11.5-7.4-18.8-15.4-23.3-25.1l-0.6-1.3v-17l0.6-1.3c11.2-22.8 30.3-41.8 54.2-53.4 23.9-11.6 50.7-14.8 75.9-9.3 6.7 1.3 12.7 3.9 18.2 6.8 16.6 9.3 33.2 19.3 49.4 28.6 6.7 3.9 13.1 7.7 19.8 11.6 9.9 5.8 14.3 15.1 10.8 24.1-2.2 6.4-8.6 12.9-15 15.1-4.8 1.6-11.2 0.6-18.8-3.9-3.5-1.9-6.7-3.9-10.2-5.5-13.7-7.4-28.1-15.1-41.1-24.4-19.1-13.5-39.5-15.4-66.3-6.1-14.7 5.1-25.8 11.3-33.1 23.5 2.9 1.9 5.7 3.5 8.6 5.5 9.2 6.1 19.1 12.2 28.7 18C241.6 667.5 329.9 743.7 401 831.4c15.3 19 28.7 39.5 41.4 59.1 5.7 8.7 11.5 17.7 17.5 26.7 1.3 1.9 2.6 4.2 3.8 6.4l34.7-9.3c30.6-8.4 60.9-16.4 91.2-24.8l26.8-7.1c52-14.1 105.5-28.6 158.4-42.4 4.8-1.3 5.7-2.3 5.7-7.7 0.6-13.2 1.3-26.4 2.2-39.2 1.3-18 2.5-36.6 2.9-55 1.3-66.9-12.7-130.8-26.8-184.5-23.3-89-48.1-183.5-76.5-288.7-1.9-7.4-6.1-15.1-11.2-21.9-5.4-7.1-15.3-14.5-30-9.6-15.3 4.8-19.4 17.4-20.4 27-0.6 7.1 0.3 15.1 2.5 24.1 8.3 31.5 16.6 63.3 24.9 94.5 6.1 22.8 12.4 46.6 18.5 70.1 1 3.5 2.2 10.6 0.3 17-2.5 9-10.2 14.5-20.1 14.1-10.5-0.3-17.2-6.4-20.4-18.3l-12.1-45.3c-5.7-22.2-11.8-44-17.5-66.2-3.8-14.1-7.3-28.3-11.2-42.1-10.2-38.3-20.7-78.1-31.2-117-1.9-7.4-6.1-15.1-11.2-21.9-7.7-9.6-18.2-13.5-29.6-10.3-14.3 3.9-18.5 16.7-20.1 23.8-1.3 7.7-1.3 16.4 0.6 23.5 18.2 70.1 37.3 141.1 55.5 209.9 5.1 19.6 10.2 38.9 15.6 58.5 0 0.6 0.3 1 0.3 1.6 0.3 1.6 1 3.2 1.3 5.1 1.9 13.5-3.8 23.1-15.6 26-11.2 2.6-21.4-3.5-24.9-16.1-3.5-11.6-6.7-23.1-9.6-34.7l-1.9-7.1c-10.8-40.8-21.7-81.3-32.5-122.2-13.4-50.8-26.8-101.6-40.2-152.1-5.1-19.3-17.5-30.9-35.4-32.1-16.3-1.3-32.5 8.7-38.9 23.8-3.5 8.4-3.8 17-0.6 28.9 10.8 40.8 21.7 82 32.5 122.8 8 29.9 15.9 59.5 23.6 89.4 3.5 13.2 7 26 10.5 39.2 5.4 20.6 10.8 40.8 16.3 61.4 2.5 9.6 1.3 18.3-3.8 24.1-4.1 5.1-10.5 7.4-17.9 6.8-14.3-1.6-17.9-14.5-19.1-19.3L398 477.1 384.7 427l-13.1-53.4c-13.4-50.8-27.4-103.5-41.4-155.3-5.4-19.6-16.3-30.2-32.5-30.9-19.1-1-34.1 8.4-41.1 25.4-3.2 7.7-3.2 16.4-0.3 28L334.6 536l14.7 55c1 2.9 1.6 6.1 2.2 9.3 2.5 13.2-3.2 23.5-14.7 26.7-11.5 3.2-22.3-3.9-25.8-16.4-3.5-12.2-6.7-24.8-9.9-36.6-1.3-4.2-2.2-8.7-3.5-12.9l-11.5-43.4c-5.4-20.6-10.8-40.8-16.3-61.4-4.5 9.6-8.3 18.6-12.4 28-1 1.9-1.6 4.2-2.2 6.4l-1.9 5.8c-4.8 12.5-15.6 18.3-26.8 14.1-11.5-4.2-16.6-15.1-12.8-27.6 8-27.6 20.4-53.4 37.3-76.8 3.2-4.5 3.8-7.7 2.2-13.2-11.2-40.8-22.6-84.2-37.6-140.5-10.8-41.1 3.2-76.5 38.6-96.8 21-11.9 44.6-14.1 68.5-5.5 1.9 0.6 3.8 1.3 5.4 2.3 12.8-30.5 36-48.2 68.2-51.8 31.9-3.5 57.4 8.7 75.9 36 4.1-3.9 8.3-7.7 13.1-10.6 15.3-10 34.7-13.2 53.2-8.7 18.8 4.5 34.4 16.1 44 32.8 6.7 11.6 10.5 24.4 14.7 36.6 1.6 5.1 3.2 10.3 5.1 15.1 0.6 1.6 1.3 3.5 1.6 5.1 1.3-0.6 2.6-1.6 3.8-2.3 8-4.8 16.6-10 25.8-12.5 35.4-10 73 10.9 86.1 47.9 7 20.3 12.4 41.1 17.9 61.4 1.3 4.5 2.2 9 3.5 13.5l9.2 34.7c18.2 69.1 37.3 140.5 55.1 210.9 5.4 21.2 9.6 43.1 13.7 64.3 1.6 7.7 3.2 15.4 4.8 23.5l100.4-30.9c-2.5-10.6-9.2-19.6-21-28-16.6-11.6-34.7-22.2-57.4-19-5.1 0.6-9.9-0.6-14-3.9-4.5-3.2-7.3-8-8-13.5-1.6-12.2 4.1-21.9 14.7-23.5 9.6-1.6 22-3.2 33.5-0.6 39.2 8.7 68.5 28.9 87 60.4 2.5 4.2 4.1 9 6.1 13.2 0.6 1.9 1.6 3.9 2.2 5.5l-0.9 1.2z m0 0" fill="#333333" p-id="4879"></path><path d="M899.8 264c-19.8 37-41.1 73.6-61.8 109.3l-22 37.6c-4.5 7.7-11.2 11.9-18.5 11.9-3.5 0-7-1-10.8-2.9-5.1-2.9-8.6-7.1-9.9-12.2-1.6-5.8-0.3-12.5 3.5-19 10.5-18.6 21-37 31.9-55.6 14.3-24.8 29-50.5 43.4-75.9 4.5-7.7 8.9-15.8 11.2-24.1 5.1-17.7-4.1-36.3-21.7-44.4-19.1-9-34.7-4.5-46.5 12.9-5.1 7.4-9.9 14.8-15 22.2L772 241.2c-5.7 8.7-15.3 11.6-23.6 7.7-6.4-2.9-12.1-9-13.7-15.1-1.9-6.8 1.9-14.5 4.1-18.6 3.8-6.8 8.3-13.2 12.1-19.6 5.1-8 10.5-16.1 15-24.4 9.6-17 8-33.8-5.1-46.9-8.6-9-20.4-13.5-31.9-12.2-11.5 1.3-21.4 7.4-28 17.7-4.1 6.4-8 13.2-11.8 19.9-3.2 5.8-6.7 11.9-10.5 18-2.6 4.2-7.7 10.9-14.7 12.2-6.4 1.3-16.3-0.6-20.4-6.1-5.4-6.8-4.5-17.7-3.8-20.9 0.6-4.5 1.9-9 3.2-13.2 1.3-5.1 2.9-9.6 2.9-14.1 0.3-7.1-1.3-19.6-14.7-26-10.5-4.8-21.4-3.5-32.5 4.8-1.3 1-2.5 1.9-3.8 3.2-1.3 1.3-2.9 2.6-4.1 3.5-8.9 6.7-20.7 6.1-28-1.6-8-8.4-8-20.6-0.3-29.3 17.2-19.3 43.4-28.9 67.9-25.1 21.4 3.2 39.2 15.8 49.1 35.4 25.5-21.9 53.2-26.7 83.2-14.8 30 11.9 47.8 35 52 66.9h5.7c8 0 16.3 0.3 24.2 1.9 26.8 6.1 48.1 23.1 58.6 46.6 11 22.4 9.4 49.1-3.3 72.9zM177.5 364.9c-18.2 7.1-34.7 12.5-51 17-1.6 0.6-3.5 0.6-5.1 0.6-7.6 0-14.7-5.1-17.5-13.5-4.1-10.9-0.6-21.2 8.3-25.1 12.7-5.5 25.5-10 37.9-14.1 4.5-1.6 8.9-3.2 13.1-4.8l1.3-0.3h1.3c4.8 0.3 18.8 1.9 22.3 16.1 2.7 11-1.7 20.6-10.6 24.1z m13.7-197.3l-2.2 2.9c-0.6 1-1.6 2.3-2.5 3.5-2.6 3.9-5.1 8-9.9 10-2.2 1-5.1 1.3-8.3 1.3-4.8 0-9.9-1.3-13.4-4.2-12.4-10.6-23.6-22.5-32.8-32.8-7.6-8.4-7-20.3 1-28.6 8-7.7 20.7-8 28.4-0.6 11.5 10.6 22.3 22.2 32.2 32.8 2.2 2.3 3.2 5.1 4.1 8 0.3 1.3 1 2.6 1.6 3.9l1.8 3.8z m91.4-61.4l-2.9 3.2-3.8 4.8c-2.9 3.9-5.7 7.7-10.2 10-2.9 1.6-6.1 2.6-9.2 2.6-6.4 0-12.4-3.2-15.9-9.3-6.4-11.3-12.1-23.1-17.2-35.4-3.8-9.3-0.6-18.6 8.3-24.4 9.6-6.1 20.1-4.8 25.2 2.6 6.1 9.3 11.5 19 16.9 29.3 2.2 4.2 4.5 8.4 7 12.9l1.8 3.7zM168.8 269.8c-3.5 4.2-8.3 6.4-13.4 6.7-6.1 0.3-11.8 0.6-17.8 0.6-5.7 0-11.5-0.3-16.9-0.6-10.8-0.6-18.8-10-18.5-21.5 0.3-11.3 8.3-19.3 19.4-20.3 4.1-0.3 8.3-0.3 12.1 0h20.4c10.8 1 18.8 8.7 19.8 19.9 0.4 5.5-1.5 11-5.1 15.2z m0 0" fill="#333333" p-id="4880"></path></svg>-->
    </div>
    <div class="red_paper">
        <svg width="29" height="29" t="1570108831083" class="icon" viewBox="0 0 1024 1024" version="1.1"
             xmlns="http://www.w3.org/2000/svg" p-id="2728">
            <path d="M580.7159375 583.660625c12.6778125 0 22.9321875-10.2609375 22.9321875-22.9396875s-10.254375-22.9359375-22.9321875-22.9359375h-13.9415625l16.4503125-27.5175c6.493125-10.8759375 2.955-24.9571875-7.906875-31.475625-10.8796875-6.474375-24.9459375-2.9409375-31.471875 7.906875l-30.545625 51.08625h-3.073125l-30.538125-51.08625c-6.5221875-10.8478125-20.5884375-14.38125-31.464375-7.906875-10.876875 6.508125-14.4215625 20.5959375-7.918125 31.475625l16.4503125 27.5175h-13.966875c-12.6675 0-22.9396875 10.2571875-22.9396875 22.9359375s10.2684375 22.9396875 22.9396875 22.9396875h46.014375v28.674375h-46.014375c-12.6675 0-22.9396875 10.2571875-22.9396875 22.9359375s10.2684375 22.9396875 22.9396875 22.9396875h46.014375v99.4115625c0 12.6675 10.2684375 22.9396875 22.9359375 22.9396875 12.6703125 0 22.93875-10.2721875 22.93875-22.9396875v-99.4125h46.0359375c12.6778125 0 22.9321875-10.26 22.9321875-22.9396875 0-12.6778125-10.254375-22.9359375-22.9321875-22.9359375h-46.0359375v-28.674375h46.036875z m0 0"
                  p-id="2729"></path>
            <path d="M725.4715625 128.5625H298.011875C249.0275 128.5625 209.1875 168.41375 209.1875 217.409375v590.3128125c0 48.9628125 39.84 88.839375 88.824375 88.839375h427.4596875c48.965625 0 88.824375-39.8765625 88.824375-88.839375V217.409375c0-48.995625-39.8578125-88.846875-88.824375-88.846875z m-427.4596875 45.875625h427.4596875c23.675625 0 42.9421875 19.276875 42.9421875 42.9675v14.9484375c-0.48 0.9009375-0.9965625 1.7765625-1.3696875 2.754375-29.8790625 79.2853125-134.9634375 134.6521875-255.5709375 134.6521875-119.7478125 0-224.6521875-54.8765625-255.1209375-133.42125-0.3478125-0.9046875-0.8390625-1.7025-1.2890625-2.5378125V217.409375c0.0065625-23.694375 19.273125-42.97125 42.94875-42.97125z m427.4596875 676.24125H298.011875c-23.675625 0-42.9421875-19.2628125-42.9421875-42.95625v-490.378125C311.5109375 377.3928125 406.98125 415.64375 511.473125 415.64375c105.0328125 0 200.625-38.4375 256.940625-98.825625v490.905c0 23.6934375-19.2665625 42.95625-42.9421875 42.95625z m0 0"
                  p-id="2730"></path>
        </svg>
    </div>
</div>
<!--模态框-->
<div class="modal fade" id="commentModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h5 class="modal-title" id="commentModalLabel"></h5>
            </div>
            <div class="modal-body">
                <form class="form-horizontal form_2" role="form" style="height: auto">
                    <div class="form-group">
                        <div>
                            <input type="text" class="form-control" id="content_new" placeholder="回复内容" name="content"
                                   onblur="firstPoint(this)">
                            <span id="point_3" style="height:1rem;width: 100%;display: block"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <div>
                            <input type="text" class="form-control" id="email_new" placeholder="请输入邮箱" name="email"
                                   onblur="secondPoint(this)">
                            <span id="point_4"
                                  style="height:1rem;width: 100%;display: block"></span>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary btn-sm" id="commit_2" onclick="postComment(this.id)">回复
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
</body>
<script src="../public/modules/jquery-3.3.1.min.js"></script>
<script src="../public/modules/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
<script src="../public/modules/template-web.js"></script>
<script type="text/template" id="model">
    {{each comment item index}}
    <div style="cursor: pointer" data-toggle="modal" data-target="#commentModal"
         onclick="showCommentBox('{{item.email}}')" class="comment-item">
        {{if item.lastCmt_email === null}}
        <span>{{item.email}}</span>
        {{else}}
        <span>{{item.email}}回复{{item.lastCmt_email}}</span>
        {{/if}}
        <span>{{item.time}}</span>
        <p>{{item.content}}</p>
    </div>
    {{/each}}
</script>
<script>
    var replyEmail;
    //移动端点击显示工具箱
    // $('.tool-icon').click(function () {
    //     $('.tool-bar').toggle();
    // });
    $(document).mouseup(function (e) {
        var area = $('.tool-bar');   // 设置目标区域
        if (!area.is(e.target) && area.has(e.target).length === 0) { // Mark 1
            $('.tool-bar').css('display','none');
        }
        // 原来在外面，无效
        $('.tool-icon').click(function () {
            $('.tool-bar').toggle();
        });
    });

    function firstPoint(self) {
        var id = self.id;
        var val = $("input[id='" + id + "']").val();
        console.log(val);  // val是有jQuery插件时用的
        if (val === '') {
            if (id === 'content') {
                $('#point_1').text('*评论内容不能为空');
            }
            // $('#point_1').text('评论内容不能为空');
            else if (id === 'content_new') {
                $('#point_3').text('*回复内容不能为空');
            }
            // console.log($('#point_1').innerText);
        } else {
            if (id === 'content') {
                $('#point_1').text('');
            }
            else if (id === 'content_new') {
                $('#point_3').text('');
            }
        }
    }

    function secondPoint(self) {
        var id = self.id;
        var val = $("input[id='" + id + "']").val();
        console.log(val === '');
        // var re=/^\w+@[a-z0-9]+\.[a-z]{2,4}$/
        var re = /^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/
        if (val === '') {
            if (id === 'email') {
                $('#point_2').text('*请填入您的邮箱便于联系');
            }
            else if (id === 'email_new') {
                $('#point_4').text('*请填入您的邮箱便于联系');
            }
        }
        else if (!re.test(val)) {
            if (id === 'email') {
                $('#point_2').text('*邮箱格式不正确');
            }
            else if (id === 'email_new') {
                $('#point_4').text('*邮箱格式不正确');
            }
        } else {
            if (id === 'email') {
                $('#point_2').text('');
            }
            else if (id === 'email_new') {
                $('#point_4').text('');
            }
        }
    }

    function postComment(id) {
        console.log(id);
        console.log("触发了");
        var data;
        var btn;
        var flag;
        if (id === 'commit_1') {
            data = {
                content: $('#content').val(),
                email: $('#email').val(),
                articleId: '<%=thisArticle[0].id%>',
            };
            btn = $(".form_1:input");
            flag = $('#point_2').text() === '' && $('#point_1').text() === '';
        } else if (id === 'commit_2') {
            data = {
                content: $('#content_new').val(),
                email: $('#email_new').val(),
                articleId: '<%=thisArticle[0].id%>',
                lastCmt: replyEmail
            };
            btn = $(".form_2:input");
            flag = $('#point_4').text() === '' && $('#point_3').text() === ''
        }
        btn.trigger("blur");
        if (flag) {
            $.ajax({
                url: "/leaveWord",
                type: 'POST',
                dataType: 'json',
                data: data,
                success: function (res) {
                    console.log("成功");
                    console.log(res);
                    showComment(parseInt('<%=thisArticle[0].id%>'));
                },
                error: function (res) {
                    console.log("失败");
                },
                complete: function (res) {
                    console.log("成功");
                }
            })
        }
    }

    function showComment(articleId) {
        $.ajax({
            url: '/showComment/' + articleId,
            type: 'GET',
            dataType: 'json',
            success: function (res) {
                console.log("成功");
                console.log(res);
                // console.log(res.commentList[0].lastCmt_email === null);
                var context = {comment: res.commentList};
                var html = template('model', context);
                $('#all-comment').html(html);
            },
            error: function (res) {
                console.log("失败");
            },
            complete: function (res) {
                console.log("完成");
            }
        })
    }

    $(document).ready(function () {
        console.log(parseInt('<%=thisArticle[0].id%>'));
        console.log('<%=thisArticle[0].id%>');
        showComment(parseInt('<%=thisArticle[0].id%>'));
    });


    function showCommentBox(email) {
        replyEmail = email;
        $('#commentModalLabel').text('回复' + email);
    }
</script>
</html>